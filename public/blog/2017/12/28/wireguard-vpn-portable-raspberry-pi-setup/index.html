<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Wireguard Vpn Portable Raspberry Pi Setup | The poetry of (in)security</title>
  <link rel = 'canonical' href = 'https://example.org/blog/2017/12/28/wireguard-vpn-portable-raspberry-pi-setup/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Wireguard Vpn Portable Raspberry Pi Setup" />
<meta property="og:description" content="We often use wireless networks to access the internet. This may be at home, work or even places like restaurants. When we connect to these networks, the security of our internet traffic is under the control of the owner of the wireless network. This is also the case when we connect to a wired connection on a network we don&rsquo;t control." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.org/blog/2017/12/28/wireguard-vpn-portable-raspberry-pi-setup/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-12-28T16:44:50+03:00" />
<meta property="article:modified_time" content="2017-12-28T16:44:50+03:00" />


  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Wireguard Vpn Portable Raspberry Pi Setup"/>
<meta name="twitter:description" content="We often use wireless networks to access the internet. This may be at home, work or even places like restaurants. When we connect to these networks, the security of our internet traffic is under the control of the owner of the wireless network. This is also the case when we connect to a wired connection on a network we don&rsquo;t control."/>

  
  
  
  <link rel="stylesheet" href="https://example.org/css/styles.e6089d87700a06caa386c15bac0e1f25720ef059b3e065c0a37502617f43d5e1ef54d1c10e3f4be773eb071ea4ae80b46775fad1ad2ae146f1ceac479135227f.css" integrity="sha512-5gidh3AKBsqjhsFbrA4fJXIO8Fmz4GXAo3UCYX9D1eHvVNHBDj9L53PrBx6kroC0Z3X60a0q4UbxzqxHkTUifw=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://example.org/images/favicon.ico" />

  
  
  
  
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HY9XRSX5QQ"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-HY9XRSX5QQ', { 'anonymize_ip': false });
}
</script>

  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="https://example.org/">
  
    <div id="logo" style="background-image: url(https://example.org/images/logo.png)"></div>
  
  <div id="title">
    <h1>The poetry of (in)security</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#" aria-label="Menu"><i class="fas fa-bars fa-2x" aria-hidden="true"></i></a>
      </li>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/post">Posts</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
        <li><a href="/whoami">Whoami</a></li>
      
    </ul>
  </div>
</header>



    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="content" itemprop="articleBody">
  
    <p>We often use wireless networks to access the internet. This may be at home, work or even places like restaurants. When we connect to these networks, the security of our internet traffic is under the control of the owner of the wireless network. This is also the case when we connect to a wired connection on a network we don&rsquo;t control.</p>
<p>With this in mind, using a VPN on foreign networks is a good idea. Configuring and remembering to turn on VPN on the several mobile devices we carry around is often a hassle.</p>
<p>In this post, I&rsquo;ll detail how you can set up a portable VPN connection on a Raspberry Pi. You can carry it with you everywhere you go and have all your devices connect to it ensuring a secure connection. This also saves the work of configuring a VPN connection on all your devices.</p>
<p>Before we continue, you can go through my post on setting up a typical Wireguard VPN connection <a href="https://www.ckn.io/blog/2017/11/14/wireguard-vpn-typical-setup/"><strong>here</strong></a>.</p>
<h1 id="set-up-details">Set up details</h1>
<p>Our intended setup is as below:</p>
<p><img src="/images/portable_vpn.png" alt="alt"></p>
<p>Here&rsquo;s how our setup will look like:</p>
<ul>
<li>An ubuntu 16.04 (x64) VPS as our VPN server (Gateway).</li>
<li>The internet facing interface on the server is <code>eth0</code>.</li>
<li>A Raspberry Pi 3 Model B running Raspbian as our portable VPN client.</li>
<li>The Pi will be connected to the internet via LAN <code>eth0</code> or an external USB wireless card <code>wlan1</code>.</li>
<li>We will use the <code>10.200.200.0/24</code> subnet for the network between the Pi and the VPN Gateway.</li>
<li>We will use the <code>10.100.100.0/24</code> subnet for the wireless network that the Pi will host for the clients on <code>wlan0</code>.</li>
<li>We will use <code>10.200.200.1/24</code> as the VPN Gateway interface IP.</li>
<li>We will use <code>10.200.200.2/24</code> as the Pi VPN interface IP.</li>
<li>We will use <code>10.100.100.1/24</code> as the Pi wireless network interface <code>wlan0</code> IP.</li>
<li>Unbound DNS resolver for added security.</li>
</ul>
<h1 id="set-up-steps">Set up steps</h1>
<ol>
<li>Install WireGuard on the VPN server.</li>
<li>Prepare the Pi and install dependencies.</li>
<li>Set up Wireguard on the Pi.</li>
<li>Set up the wireless network on the Pi.</li>
<li>Set up forwarding and NAT</li>
<li>Bring up the wireless network and test the setup.</li>
</ol>
<h1 id="1-install-wireguard-on-the-vpn-server">1. Install WireGuard on the VPN server.</h1>
<p>This is straightforward if you have gone through my guide <a href="https://www.ckn.io/blog/2017/11/14/wireguard-vpn-typical-setup/"><strong>here</strong></a>. I&rsquo;ll therefore run through the automated ansible process.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#Clone the repo onto your computer</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/iamckn/wireguard_ansible
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Move into the repo directory</span>
</span></span><span style="display:flex;"><span>cd wireguard_ansible
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Edit the hosts file in that directory to change the IP to that of your VPN Gateway</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Begin the installation process by running</span>
</span></span><span style="display:flex;"><span>ansible-playbook wireguard.yml -u root -k -i hosts
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#If you&#39;re using an SSH key for authentication run this instead</span>
</span></span><span style="display:flex;"><span>ansible-playbook wireguard.yml -u root -i hosts
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Give it a few minutes and the server set up will be complete.</span>
</span></span></code></pre></div><p>The VPN gateway will be set up to use <a href="https://www.unbound.net/"><strong>unbound</strong></a> to provide secure DNS to the VPN network. We will however need to modify the unbound dns configuration to account for the wireless network the Pi will host.</p>
<p>Edit the file <code>/etc/unbound/unbound.conf</code> and add the following two lines to the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#allow pi wireless network to use the unbound dns server</span>
</span></span><span style="display:flex;"><span>access-control: 10.100.100.0/24	   		allow
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e">#protect the pi wireless network subnet from public internet names resolution attempts</span>
</span></span><span style="display:flex;"><span>private-address: 10.100.100.0/24
</span></span></code></pre></div><p>Restart the DNS server for the changes to take effect</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl restart unbound
</span></span></code></pre></div><h1 id="2-prepare-the-pi-and-install-dependencies">2. Prepare the Pi and install dependencies.</h1>
<p>We now move to the Pi to install some required dependencies. First ensure that your Pi has the latest raspbian OS installed, then update it and install the following dependencies:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt-get upgrade
</span></span><span style="display:flex;"><span>sudo apt-get install hostapd dnsmasq libmnl-dev linux-headers-rpi build-essential git dnsutils bc raspberrypi-kernel-headers iptables-persistent
</span></span></code></pre></div><h1 id="3-set-up-wireguard-on-the-pi">3. Set up Wireguard on the Pi.</h1>
<p>We then set up Wireguard on the Pi. Install Wireguard from source as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://git.zx2c4.com/WireGuard
</span></span><span style="display:flex;"><span>cd WireGuard/src
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>sudo make install
</span></span><span style="display:flex;"><span>sudo modprobe wireguard
</span></span></code></pre></div><p>Copy the file named <code>wg0.conf</code> from the home folder of the VPN server to the Pi. Use scp or whatever other method you prefer then move it to <code>/etc/wireguard/wg0.conf</code> on the Pi.</p>
<p>Bring up the Wireguard interface on the Pi and enable it to start on boot:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo wg-quick up wg0
</span></span><span style="display:flex;"><span>sudo systemctl enable wg-quick@wg0.service
</span></span></code></pre></div><p>The VPN tunnel between the Pi and the VPN Server should now be up and running. You can confirm this by checking the public IP on the Pi using the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl ifconfig.co
</span></span></code></pre></div><h1 id="4-set-up-the-wireless-network-on-the-pi">4. Set up the wireless network on the Pi.</h1>
<p>We now need to set up the Pi to host a wireless network through which other clients can connect. We will use <code>hostapd</code> to run the wireless network and <code>dnsmasq</code> for DNS and DHCP.</p>
<p>Edit the following line in the file <code>/etc/default/hostapd</code> as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>DAEMON_CONF<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/etc/hostapd/hostapd.conf&#34;</span>
</span></span></code></pre></div><p>Create the following file <code>/etc/hostapd/hostapd.conf</code> and edit it as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>interface<span style="color:#f92672">=</span>wlan0
</span></span><span style="display:flex;"><span>hw_mode<span style="color:#f92672">=</span>g
</span></span><span style="display:flex;"><span>channel<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>ieee80211d<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>country_code<span style="color:#f92672">=</span>BZ
</span></span><span style="display:flex;"><span>ieee80211n<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>wmm_enabled<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ssid<span style="color:#f92672">=</span>&lt;your ssid&gt;
</span></span><span style="display:flex;"><span>auth_algs<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>wpa<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>wpa_key_mgmt<span style="color:#f92672">=</span>WPA-PSK  
</span></span><span style="display:flex;"><span>rsn_pairwise<span style="color:#f92672">=</span>CCMP
</span></span><span style="display:flex;"><span>wpa_passphrase<span style="color:#f92672">=</span>&lt;password of the ssid&gt;
</span></span></code></pre></div><p>Modify the field <code>ssid</code> and <code>wpa_passphrase</code> to the name you want to use for your wireless network and the wireless password respectively.</p>
<p>Next we set up the various network interfaces on the Pi by editing the file <code>/etc/network/interfaces</code> and adding the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>auto wlan0
</span></span><span style="display:flex;"><span>iface wlan0 inet static
</span></span><span style="display:flex;"><span>  address 10.100.100.1
</span></span><span style="display:flex;"><span>  netmask <span style="color:#ae81ff">24</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>allow-hotplug eth0
</span></span><span style="display:flex;"><span>iface eth0 inet dhcp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>allow-hotplug usb0
</span></span><span style="display:flex;"><span>iface usb0 inet dhcp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>allow-hotplug wlan1
</span></span><span style="display:flex;"><span>iface wlan1 inet dhcp
</span></span><span style="display:flex;"><span>   wpa-driver wext
</span></span><span style="display:flex;"><span>   wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
</span></span></code></pre></div><p><code>wlan0</code> is set to the IP <code>10.100.100.1/24</code> and is the gateway that will be used by wireless clients connecting to the Pi.
All the other interfaces are set up as possible internet facing interfaces depending on which one is connected to the internet.</p>
<p>You may need to connect your Pi to different wireless networks using an external wireless USB card. If not, skip the following step, otherwise edit the file <code>/etc/wpa_supplicant/wpa_supplicant.conf</code> and add the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>network<span style="color:#f92672">={</span>
</span></span><span style="display:flex;"><span>    ssid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;network 1&#34;</span>
</span></span><span style="display:flex;"><span>    psk<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password to network 1&#34;</span>
</span></span><span style="display:flex;"><span>    id_str<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;w&#34;</span>
</span></span><span style="display:flex;"><span>    priority<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>network<span style="color:#f92672">={</span>
</span></span><span style="display:flex;"><span>    ssid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;network 2&#34;</span>
</span></span><span style="display:flex;"><span>    psk<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password to network 2&#34;</span>
</span></span><span style="display:flex;"><span>    id_str<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;z&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>You can add all the wireless networks you need to connect to to the file following the same format. Whenever you plug in an external wireless USB card, the Pi will scan for available networks and attempt to connect using the details in the file.</p>
<p>Let&rsquo;s now set up DHCP and DNS to serve the wireless network the clients connecting to the Pi will use.</p>
<p>We are going to use dnsmasq so let&rsquo;s first disable operation of the default raspbian dhcp server on the wlan0 interface.
Edit the file <code>/etc/dhcpcd.conf</code> and add the following line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>denyinterfaces wlan0
</span></span></code></pre></div><p>We next back up the current dnsmasq configuration file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mv /etc/dnsmasq.conf /etc/dnsmasq.conf.orig 
</span></span></code></pre></div><p>We then configure dns by recreating the file <code>/etc/dnsmasq.conf</code> and editing it as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dhcp-authoritative
</span></span><span style="display:flex;"><span>interface<span style="color:#f92672">=</span>wlan0
</span></span><span style="display:flex;"><span>listen-address<span style="color:#f92672">=</span>10.100.100.1
</span></span><span style="display:flex;"><span>dhcp-range<span style="color:#f92672">=</span>10.100.100.50,10.100.100.150,12h
</span></span><span style="display:flex;"><span>read-ethers
</span></span><span style="display:flex;"><span>bogus-priv
</span></span><span style="display:flex;"><span>domain-needed
</span></span><span style="display:flex;"><span>dhcp-option<span style="color:#f92672">=</span>option:dns-server,10.200.200.1
</span></span></code></pre></div><p>The <code>dhcp-range</code> option determines the range of IPs clients connecting to the Pi will be allocated so you can modify it to suit your needs. Also note that the <code>dns-server</code> option is set to the VPN Server (Gateway) interface that we set up earlier.</p>
<h1 id="5-set-up-forwarding-and-nat">5. Set up forwarding and NAT</h1>
<p>To enable wireless clients to access the internet through the VPN connection between the Pi and the VPN Server, we need to do the following:</p>
<p>Uncomment the following line in <code>/etc/sysctl.conf</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>net.ipv4.ip_forward<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>Then run the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo sysctl -p
</span></span><span style="display:flex;"><span>echo <span style="color:#ae81ff">1</span> &gt; /proc/sys/net/ipv4/ip_forward
</span></span></code></pre></div><p>Finally set up the necessary NAT rules and make them persistent:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo iptables -t nat -A POSTROUTING -o wg0 -j MASQUERADE
</span></span><span style="display:flex;"><span>sudo iptables -A FORWARD -i wlan0 -o wg0 -j ACCEPT
</span></span><span style="display:flex;"><span>sudo iptables -A FORWARD -i wg0 -o wlan0 -m state --state RELATED,ESTABLISHED -j ACCEPT
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo systemctl enable netfilter-persistent
</span></span><span style="display:flex;"><span>sudo netfilter-persistent save
</span></span></code></pre></div><h1 id="6-bring-up-the-wireless-network-and-test-the-setup">6. Bring up the wireless network and test the setup.</h1>
<p>We now complete the network by starting the necessary services and bringing up the wireless network.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo ifup wlan0
</span></span><span style="display:flex;"><span>sudo service dnsmasq start
</span></span><span style="display:flex;"><span>sudo service hostapd start
</span></span><span style="display:flex;"><span>sudo update-rc.d hostapd enable 
</span></span></code></pre></div><p>We are finally done!</p>
<p>Test the set up to ensure everything works. Start with a test of DNS operation:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dig www.google.com 10.200.200.1
</span></span></code></pre></div><p>Then check to see if the wireless network you set up is available and connect to it with a wireless client. If all went well you should have a secure VPN connection from your wireless client, to the Pi and then through the VPN server (Gateway). Don&rsquo;t forget to run a DNS leak test on <a href="http://dnsleak.com/">http://dnsleak.com/</a>.</p>
<p>You now have a portable secure VPN setup on your Pi that you can carry around and use. Just connect the Pi to the network through the LAN interface, external wireless USB card or even USB ethernet. Your devices can then connect to the VPN through the Pi&rsquo;s wireless network hosted on it&rsquo;s internal wireless interface (wlan0).</p>
<p>If you prefer to do a similar setup with everything happening over ipv6, refer to this great write-up <a href="https://danrl.com/blog/2016/travel-wifi/">https://danrl.com/blog/2016/travel-wifi/</a>.</p>
<p>That concludes the VPN series!</p>
<p>Till next time, happy hacking!</p>
  
  </div>
</article>


    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2025  CK 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/post">Posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/whoami">Whoami</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
